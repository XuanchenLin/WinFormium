(function(n){function t(n){formium?.webview?.postMessage&&n.message?(n.passcode=i,formium.webview.postMessage(n)):console.error("[WinFormium] Formium webview not found or message is empty!!!")}function s(n,i){t({message:"FormiumWindowMoveTo",x:n,y:i})}function h(n,i){t({message:"FormiumWindowMoveBy",x:n,y:i})}function c(n,i){t({message:"FormiumWindowResizeTo",width:n,height:i})}function l(n,i){t({message:"FormiumWindowResizeBy",width:n,height:i})}function u(){function n(n,t){window.dispatchEvent(new CustomEvent(n,{detail:t}))}function o(t){const{state:r}=t,i=document.querySelector("html");r?n("windowactivated",{}):n("windowdeactivate",{});r?(i?.classList.add("window--activated"),i?.classList.remove("window--deactivated")):(i?.classList.remove("window--activated"),i?.classList.add("window--deactivated"))}function s(t){const{state:r}=t;if(r){n("windowstatechange",{state:r});const i=document.querySelector("html");i?.classList.remove("window--maximized","window--minimized","window--fullscreen");switch(r){case"maximized":i?.classList.add("window--maximized");break;case"minimized":i?.classList.add("window--minimized");break;case"fullscreen":i?.classList.add("window--fullscreen")}}}function h(t){const{x:i,y:r,width:u,height:f}=t;n("windowresize",{x:i,y:r,width:u,height:f})}function c(t){const{x:i,y:r,screenX:u,screenY:f}=t;n("windowmove",{x:i,y:r,screenX:u,screenY:f})}setInterval(()=>{const t=e()?.activated;if(t!==null&&t!==undefined){const n=document.querySelector("html");t?(n?.classList.add("window--activated"),n?.classList.remove("window--deactivated")):(n?.classList.remove("window--activated"),n?.classList.add("window--deactivated"))}},200);const u=document.querySelector("html");formium?.webview?.addEventListener&&(formium.webview.addEventListener("message",n=>{const{passcode:t,message:r}=n.data;if(t===i)switch(r){case"FormiumNotifyWindowStateChange":s(n.data);break;case"FormiumNotifyWindowResize":h(n.data);break;case"FormiumNotifyWindowMove":c(n.data);break;case"FormiumNotifyWindowActivated":o(n.data)}}),o({passcode:i,message:"FormiumNotifyWindowActivated",state:!0}),f?(u?.classList.add("window__titlbar--shown"),u?.classList.remove("window__titlbar--hidden")):(u?.classList.add("window__titlbar--hidden"),u?.classList.remove("window__titlbar--shown")));window.addEventListener("click",n=>{const u=n.button;if(u===0){let u=n.target;while(u&&!u.hasAttribute(r))u=u.parentElement;if(u){const n=u.getAttribute(r)?.toLowerCase();t({passcode:i,message:"FormiumWindowCommand",command:n})}}})}const i=`{{MESSAGE_PASSCODE}}`,f=`{{HAS_TITLE_BAR}}`==="true",r=`app-command`,e=()=>formium?.nativeObjects?.__hostWindowObject;class o{#target(){return formium?.nativeObjects?.__hostWindowObject}get activated(){return this.#target()?.activated??!1}get hasTitleBar(){return this.#target()?.hasTitleBar??!1}get windowState(){return this.#target()?.windowState??"normal"}get left(){return this.#target()?.x??0}set left(n){typeof n=="number"&&(this.#target().x=n)}get top(){return this.#target()?.y??0}set top(n){typeof n=="number"&&this.#target()&&(this.#target().y=n)}get width(){return this.#target()?.width??0}set width(n){typeof n=="number"&&this.#target()&&(this.#target().width=n)}get height(){return this.#target()?.height??0}set height(n){typeof n=="number"&&this.#target()&&(this.#target().height=n)}get right(){return this.left+this.width}set right(n){typeof n=="number"&&this.#target()&&(this.#target().width=this.left+this.width+n)}get bottom(){return this.top+this.height}set bottom(n){typeof n=="number"&&this.#target()&&(this.#target().height=this.top+this.height+n)}constructor(){}activate(){this.#target()?.activate()}close(){this.#target()?.close()}maximize(){this.#target()?.maximize()}minimize(){this.#target()?.minimize()}restore(){this.#target()?.restore()}fullscreen(){this.#target()?.fullscreen()}toggleFullscreen(){this.#target()?.toggleFullscreen()}}Object.defineProperty(n,"hostWindow",{configurable:!1,writable:!1,enumerable:!1,value:new o});n.moveTo=function(n,t){s(n,t)};n.moveBy=function(n,t){h(n,t)};n.resizeTo=function(n,t){c(n,t)};n.resizeBy=function(n,t){l(n,t)};document.readyState==="loading"?n.addEventListener("DOMContentLoaded",()=>{u()}):u()})(window);